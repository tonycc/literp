# Literp

ä¸€ä¸ªåŸºäºç°ä»£æŠ€æœ¯æ ˆçš„ä¼ä¸šçº§ ERP ç³»ç»Ÿï¼Œé‡‡ç”¨ Monorepo æ¶æ„ï¼Œæä¾›å‰åç«¯ä¸€ä½“åŒ–çš„è§£å†³æ–¹æ¡ˆï¼Œå¼ºè°ƒå…±äº«ç±»å‹ã€ç»Ÿä¸€è§„èŒƒä»¥åŠä¸€è‡´çš„å¼€å‘ä½“éªŒã€‚

## ğŸš€ æŠ€æœ¯æ ˆ

### å‰ç«¯æŠ€æœ¯æ ˆ
- `React 19`ï¼ˆä¸¥æ ¼æ¨¡å¼ä¸æ–° JSX è¿è¡Œæ—¶ï¼‰
- `TypeScript 5.9`ï¼ˆä¸¥æ ¼ç±»å‹æ£€æŸ¥ï¼‰
- `Vite 7`ï¼ˆå¿«é€Ÿæ„å»ºä¸å¼€å‘æœåŠ¡å™¨ï¼‰
- `Ant Design 5 + Ant Design Pro Components`ï¼ˆç»Ÿä¸€ UI è§„èŒƒï¼‰
- `React Router 7`ï¼ˆå£°æ˜å¼è·¯ç”±ï¼‰
- `Vitest`ï¼ˆå‰ç«¯æµ‹è¯•ï¼‰

### åç«¯æŠ€æœ¯æ ˆ
- `Node.js + Express`ï¼ˆAPI æœåŠ¡ï¼‰
- `TypeScript`ï¼ˆç±»å‹å®‰å…¨å¼€å‘ï¼‰
- `Prisma ORM`ï¼ˆç±»å‹å®‰å…¨æ•°æ®åº“è®¿é—®ï¼‰
- `JWT`ï¼ˆæ— çŠ¶æ€è®¤è¯ï¼‰
- `Socket.IO`ï¼ˆå®æ—¶é€šçŸ¥ï¼‰
- `Jest`ï¼ˆåç«¯æµ‹è¯•ï¼‰

### å¼€å‘å·¥å…·
- `npm workspaces`ï¼ˆMonorepo ç®¡ç†ï¼‰
- `ESLint + Prettier`ï¼ˆè´¨é‡ä¸æ ¼å¼åŒ–ï¼‰
- `TypeScript`ï¼ˆä¸¥æ ¼ç±»å‹ï¼‰
- `Vitest + Jest`ï¼ˆæµ‹è¯•ä½“ç³»ï¼‰

## ğŸ“ é¡¹ç›®ç»“æ„

```
zyerp/
â”œâ”€â”€ frontend/          # å‰ç«¯åº”ç”¨ï¼ˆReact + Vite + TS + Ant Design Proï¼‰
â”œâ”€â”€ backend/           # åç«¯æœåŠ¡ï¼ˆExpress + TS + Prismaï¼‰
â”œâ”€â”€ shared/            # å…±äº«å±‚ï¼ˆç±»å‹å®šä¹‰ã€æ¥å£å¥‘çº¦ã€å¸¸é‡ä¸å·¥å…·ï¼‰
â”œâ”€â”€ .specify/          # é¡¹ç›®è§„èŒƒä¸æ¨¡æ¿
â”œâ”€â”€ external-portal/   # å¤–éƒ¨é—¨æˆ·ï¼ˆç‹¬ç«‹å‰ç«¯åº”ç”¨ï¼‰
â”œâ”€â”€ scripts/           # è´¨é‡ã€æ¶æ„ä¸æ€§èƒ½è„šæœ¬
â”œâ”€â”€ package.json       # æ ¹é…ç½®ï¼ˆworkspacesï¼‰
â””â”€â”€ tsconfig.json      # æ ¹ TypeScript é…ç½®
```

## ğŸ¯ æ ¸å¿ƒåŸåˆ™

### 1. ç±»å‹ä¼˜å…ˆå¼€å‘ï¼ˆä¸å¯åå•†ï¼‰
- å…¨å±€å¯ç”¨ä¸¥æ ¼ç±»å‹æ£€æŸ¥ï¼Œç¦æ­¢éšæ„ä½¿ç”¨ `any`
- å…¬å…± API ä¸æœåŠ¡å±‚å¿…é¡»æä¾›å‡†ç¡®çš„ç±»å‹å®šä¹‰
- ç±»å‹å˜æ›´é¡»åŒæ­¥æ›´æ–° `shared` åŒ…å¹¶ä¼ æ’­è‡³å‰åç«¯

### 2. å…±äº«ç±»å‹ç³»ç»Ÿï¼ˆä¸å¯åå•†ï¼‰
- `shared` æ˜¯å”¯ä¸€çœŸå®æ¥æºï¼ˆtypesã€interfacesã€constantsã€utilsï¼‰
- æ‰€æœ‰ä»£ç ä»…ä» `@zyerp/shared` å¯¼å…¥ï¼Œä¸å…è®¸æœ¬åœ°é‡å¤å®šä¹‰
- å½“å‰å¼€å‘é˜¶æ®µ `shared` å…¥å£å¯¼å‡ºä¸ºæºç ï¼š`exports.import -> ./src/index.ts`

### 3. ç‰¹æ€§æ–‡ä»¶å¤¹æ¶æ„
- ä¸šåŠ¡åŸŸç»„ç»‡ï¼Œæ¨¡å—è‡ªåŒ…å«ï¼›è·¨æ¨¡å—ä¾èµ–æ¸…æ™°ä¸”æœ€å°åŒ–
- å…±äº«å·¥å…·ä¸ç±»å‹ç»Ÿä¸€æ”¾ç½®åœ¨ `shared` åŒ…ä¸­

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### ç¯å¢ƒè¦æ±‚
- `Node.js >= 18`ï¼ˆå»ºè®® 20/22ï¼‰
- `npm >= 9`

### å®‰è£…ä¾èµ–
```bash
# å®‰è£…æ‰€æœ‰å·¥ä½œç©ºé—´ä¾èµ–
npm install

# æ³¨æ„ï¼šå¦‚æœä½ ä¹‹å‰ä½¿ç”¨è¿‡ pnpm æˆ– yarnï¼Œè¯·å…ˆæ¸…ç†å…¨å±€ linkï¼Œé¿å…è§£æåˆ°é”™è¯¯è·¯å¾„ã€‚
```

### å¼€å‘å‘½ä»¤
```bash
# ç”Ÿæˆ Prisma å®¢æˆ·ç«¯ï¼ˆé¦–æ¬¡æˆ– schema å˜æ›´åï¼‰
npm run db:generate -w backend

# å¯åŠ¨åç«¯ï¼ˆé»˜è®¤ç«¯å£ 3001ï¼Œå¦‚è¢«å ç”¨å¯ä¸´æ—¶ä½¿ç”¨ï¼‰
npm run dev -w backend
# æˆ–æŒ‡å®šç«¯å£ï¼š
PORT=3002 npm run dev -w backend

# å¯åŠ¨å‰ç«¯ï¼ˆVite ä¼šè‡ªåŠ¨é€‰æ‹©ç©ºé—²ç«¯å£ï¼Œå¦‚ 5174ï¼‰
npm run dev -w frontend

# ï¼ˆå¯é€‰ï¼‰å¯åŠ¨å¤–éƒ¨é—¨æˆ·
npm run dev -w external-portal

# æ„å»ºæ‰€æœ‰åŒ…
npm run build

# æµ‹è¯•ä¸è´¨é‡
npm run test
npm run lint
npm run lint:fix
```

### å¼€å‘å·¥ä½œæµ

**ç‰¹æ€§å¼€å‘æµç¨‹**
- åœ¨ `shared/` å®šä¹‰ç±»å‹ä¸å¥‘çº¦ â†’ å®ç°åç«¯ â†’ å‰ç«¯é›†æˆ â†’ æµ‹è¯•ä¸è´¨é‡

**è´¨é‡é—¨ç¦ï¼ˆä¸å¯åå•†ï¼‰**:
- âœ… TypeScript ç¼–è¯‘å¿…é¡»æˆåŠŸï¼Œæ— é”™è¯¯
- âœ… ESLint å¿…é¡»é€šè¿‡ï¼Œé›¶è­¦å‘Š
- âœ… æ‰€æœ‰å¥‘çº¦æµ‹è¯•å’Œé›†æˆæµ‹è¯•å¿…é¡»é€šè¿‡
- âœ… æœåŠ¡å’Œå·¥å…·çš„ä»£ç è¦†ç›–ç‡ â‰¥ 80%
- âœ… ç¦æ­¢ä½¿ç”¨ `any` ç±»å‹ï¼ˆé™¤å¤–éƒ¨åº“å£°æ˜ï¼‰

### å·¥ä½œç©ºé—´å‘½ä»¤
```bash
# åœ¨ç‰¹å®šå·¥ä½œç©ºé—´ä¸­è¿è¡Œå‘½ä»¤
npm run <script> -w <workspace>

# ä¾‹å¦‚ï¼šåœ¨å‰ç«¯å·¥ä½œç©ºé—´ä¸­å®‰è£…ä¾èµ–
npm install <package> -w frontend

# åœ¨åç«¯å·¥ä½œç©ºé—´ä¸­è¿è¡Œæµ‹è¯•
npm run test -w backend
```

## ğŸ—ï¸ æ¶æ„ä¸å‰ç«¯è§„èŒƒ

### æ ¸å¿ƒè®¾è®¡åŸåˆ™ï¼ˆä¾æ®ç« ç¨‹ï¼‰
1. **å•ä¸€çœŸç›¸æ¥æº** - é€šè¿‡ `shared` åŒ…ç»Ÿä¸€å‰åç«¯çš„ç±»å‹å®šä¹‰ï¼ˆä¸å¯åå•†ï¼‰
2. **æ¨¡å—è¾¹ç•Œæ¸…æ™°** - é‡‡ç”¨ Feature-folder æ¶æ„ï¼ŒæŒ‰ä¸šåŠ¡é¢†åŸŸç»„ç»‡ä»£ç 
3. **å®‰å…¨é»˜è®¤å¼€å¯** - å†…ç½®å®‰å…¨ä¸­é—´ä»¶ã€CORS ç™½åå•ã€è¯·æ±‚é™æµç­‰
4. **å¯æµ‹è¯•ä¸å¯æ›¿æ¢** - ä¾èµ–æ³¨å…¥è®¾è®¡ï¼Œä¾¿äºå•å…ƒæµ‹è¯•å’Œç»„ä»¶æ›¿æ¢
5. **æ¸è¿›å¼æ¼”è¿›** - éµå¾ª YAGNI åŸåˆ™ï¼Œä» MVP åˆ°ä¼ä¸šçº§çš„æ¸…æ™°å‡çº§è·¯å¾„

### ç›®å½•ç»“æ„è§„èŒƒï¼ˆä»¥æ¨¡å— {module} ä¸ºä¾‹ï¼‰
```
src/features/{module}/
â”œâ”€â”€ components/          # UI å±‚ï¼š{Module}List / {Module}Form / {Module}Detail
â”œâ”€â”€ hooks/               # ä¸šåŠ¡é€»è¾‘å±‚ï¼šuse{Module}
â”œâ”€â”€ services/            # æ•°æ®æœåŠ¡å±‚ï¼š{module}.service.ts
â”œâ”€â”€ pages/               # é¡µé¢å±‚ï¼š{Module}Management.tsx
â”œâ”€â”€ constants/           # å¸¸é‡å®šä¹‰
â””â”€â”€ utils/               # å·¥å…·å‡½æ•°
```

### åˆ†é¡µç®¡ç†è§„èŒƒï¼ˆProTableï¼‰
- åˆ—è¡¨é¡µå¿…é¡»ä½¿ç”¨ `ProTable` çš„ `request` å±æ€§è¿›è¡Œè‡ªåŠ¨åˆ†é¡µ
- Service å±‚é›†ä¸­å®ç°åˆ†é¡µæ•°æ®è·å–ä¸æ ¼å¼è½¬æ¢
- å¯ç”¨å†…ç½®æœç´¢ã€æ’åºä¸åˆ†é¡µï¼›å‡å°‘æ‰‹åŠ¨çŠ¶æ€ç®¡ç†

ç¤ºä¾‹ï¼š
```ts
import { ProTable } from '@ant-design/pro-components';
import type { ProColumns } from '@ant-design/pro-components';

const columns: ProColumns<Item>[] = [ /* ... */ ];

<ProTable<Item>
  columns={columns}
  request={async (params) => {
    const { current, pageSize, ...rest } = params;
    const res = await service.getList({ current, pageSize, ...rest });
    return { data: res.data, success: res.success, total: res.total };
  }}
  rowKey="id"
  search={{ labelWidth: 'auto' }}
/>;
```

### æ•°æ®æ ¼å¼è½¬æ¢è§„åˆ™ï¼ˆå…³é”®ï¼‰
- åç«¯åˆ†é¡µè¿”å›æ ¼å¼ï¼š
  - `response = { success: true, data: { data: [], total, page, pageSize, totalPages }, message, timestamp }`
  - å®é™…æ•°ç»„ä½äº `response.data.data.data`ï¼ˆä¸æ˜¯ `items`ï¼‰
- å‰ç«¯æœŸæœ›æ ¼å¼ï¼š
  - `{ success: true, data: [], pagination: { total, page, pageSize }, message, timestamp }`
- å¿…é¡»ç”± Service å±‚è¿›è¡Œæ˜ å°„ä¸ç±»å‹æ³¨è§£åŒæ­¥æ›´æ–°ï¼š
```ts
// service.getList
async function getList(params: { current?: number; pageSize?: number; [key: string]: any }) {
  const resp = await axios.get<ApiResponse<PaginatedResponse<Item>>>('/api/...', { params });
  const paged = resp.data.data; // åç«¯ data
  const list = paged?.data ?? [];
  return {
    data: list,
    success: resp.data.success,
    total: paged?.total ?? 0,
  };
}
```

### Ant Design é™æ€ API ä½¿ç”¨è§„åˆ™
- ç¦æ­¢ä½¿ç”¨ `message.success()`ã€`Modal.confirm()` ç­‰é™æ€ API
- ä½¿ç”¨é¡¹ç›®æä¾›çš„ hooksï¼š`useMessage` ä¸ `useModal`ï¼ˆå·²åœ¨ `AntdApp` ä¸Šä¸‹æ–‡ä¸­é…ç½®ï¼‰
```ts
import { useMessage, useModal } from '@/shared/hooks';
const message = useMessage();
const modal = useModal();
message.success('æ“ä½œæˆåŠŸ');
modal.confirm({ title: 'ç¡®è®¤åˆ é™¤' });
```

### Monorepo å·¥ä½œç©ºé—´
- **frontend/** - React åº”ç”¨ï¼Œç‰¹æ€§æ–‡ä»¶å¤¹æ¶æ„
- **backend/** - Express APIï¼ŒæœåŠ¡å±‚ç»„ç»‡
- **shared/** - ä»…åŒ…å«ç±»å‹å®šä¹‰å’Œè·¨åŒ…å·¥å…·å‡½æ•°ï¼ˆå”¯ä¸€ç±»å‹çœŸå®æ¥æºï¼‰

### æµ‹è¯•ç­–ç•¥
- å¥‘çº¦æµ‹è¯•ï¼ˆåç«¯ Jestï¼‰ï¼šAPI ç«¯ç‚¹è¡Œä¸º
- å•å…ƒ/é›†æˆæµ‹è¯•ï¼ˆå‰ç«¯ Vitestï¼‰ï¼šç»„ä»¶ä¸é€»è¾‘
- è´¨é‡é—¨ç¦ï¼šç±»å‹æ£€æŸ¥ã€Lint é›¶è­¦å‘Šã€æµ‹è¯•é€šè¿‡

### å¹¶è¡Œå¼€å‘æ”¯æŒ
- åŸºç¡€æ¶æ„å®Œæˆåï¼Œç‰¹æ€§å¯ç‹¬ç«‹å¼€å‘
- å…±äº«ç±»å‹å¿…é¡»ç‰ˆæœ¬åŒ–å¹¶åŸå­åŒ–æ›´æ–°
- å¤šä¸ªå¼€å‘è€…å¯åŒæ—¶å¼€å‘ä¸åŒç‰¹æ€§
- é›†æˆæµ‹è¯•éªŒè¯è·¨ç‰¹æ€§å…¼å®¹æ€§

## ğŸ“š ç›¸å…³æ–‡æ¡£

- å‰ç«¯è§„èŒƒï¼š`frontend/docs/frontend-development-standards.md`
- é¡¹ç›®ç« ç¨‹ï¼š`./.specify/memory/constitution.md`
- æ¨¡æ¿ä¸è§„èŒƒï¼š`./.specify/templates/`

## ğŸ¤ è´¡çŒ®ä¸æ³¨æ„äº‹é¡¹
- ä¸¥æ ¼éµå®ˆç±»å‹ä¼˜å…ˆä¸å…±äº«å±‚å”¯ä¸€çœŸå®æ¥æº
- æ‰€æœ‰ PR å¿…é¡»é€šè¿‡ç±»å‹æ£€æŸ¥ä¸ Lintï¼ˆé›¶è­¦å‘Šï¼‰
- æ–°ç‰¹æ€§éœ€åŒ…å«å¿…è¦æµ‹è¯•ä¸æ–‡æ¡£
- ä»»ä½•è¯†åˆ«åˆ°çš„ä»£ç åå‘³é“ï¼ˆåƒµåŒ–ã€å†—ä½™ã€å¾ªç¯ä¾èµ–ã€è„†å¼±æ€§ã€æ™¦æ¶©æ€§ã€æ•°æ®æ³¥å›¢ã€ä¸å¿…è¦å¤æ‚æ€§ï¼‰éœ€åŠæ—¶æå‡ºä¼˜åŒ–å»ºè®®
- ä¸¥ç¦æ¸…ç©ºæ•°æ®åº“æ•°æ®ï¼ˆåŒ…æ‹¬æ‰€æœ‰è¡¨ä¸­æ•°æ®ï¼‰

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦æƒ…è¯·æŸ¥çœ‹ [LICENSE](./LICENSE) æ–‡ä»¶ã€‚

---

**ç‰ˆæœ¬**: 1.0.0 | **æœ€åæ›´æ–°**: 2025-11-10